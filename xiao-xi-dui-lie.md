# 消息队列

"消息队列"是在消息的传输过程中保存消息的容器 .

#### 为什么会需要消息队列

可以简单的理解为 , 在高并发环境下 , 由于来不及同步处理 , 请求往往会发生阻塞 . 比如MySQL中 , 大量的insert , update之类的请求同时到达MySQL , 直接会导致无数的行锁表锁 , 甚至最后请求会堆积过多 , 从而触发too many connections错误 . 通过使用消息队列 , 就可以异步处理请求 , 从而缓解系统的压力 .

> 分布式系统就是这样一个系统 , 系统中一个你甚至都不知道的计算机出了故障 , 却可能导致你自己的计算机不可用 . 一语道破了分布式的复杂与不可控 , 和分布式调用的第一原则 , 就是不要分布式 . 当然 , 现代的应用系统中 , 也很难找到完全不需要分布式调用的场景 .
>
> 总之 , 谨慎的对待分布式调用 , 无论是RPC平台 , 还是Web Service , 都因为驻留在不同进程空间的分布式组件 , 而引入额外的复杂度 , 并可能对系统的效率、可靠性、可预测性等诸多方面带来负面的影响 .
>
> 在面对不同系统之间的通信、集成与整合 , 尤其当面临异构系统时 , 这种分布式的调用与通信变得越重要 , 它在架构设计中就更加凸显其价值 . 并且 , 从业务分析与架构质量的角度来讲 , 我们也希望在系统架构中尽可能地形成对服务的重用 , 通过独立运行在进程中服务的形式 , 彻底解除客户端与服务端的耦合 . 这常常是架构演化的必然道路 .
>
> 随着网络基础设施的逐步成熟 , 从RPC进化到Web Service , 并在业界开始普遍推行SOA , 再到后来的RESTful平台以及云计算中的PaaS与SaaS概念的推广 , 分布式架构在企业应用中开始呈现出不同的风貌 , 然而殊途同归 , 这些分布式架构的目标仍然是希望回到建造巴别塔的时代 , 系统之间的交流不再为不同语言与平台的隔阂而产生障碍 . 正如Martin Fowler在《企业集成模式》一书的序中写道 : "集成之所以重要是因为相互独立的应用是没有生命力的 . 我们需要一种技术能将在设计时并未考虑互操作的应用集成起来 , 打破它们之间的隔阂 , 获得比单个应用更多的效益 " . 这或许是分布式架构存在的主要意义 .

#### 集成模式中的消息模式

企业级应用系统就是对数据的处理 , 而对于一个拥有多个子系统的企业应用系统来说 , 它的基础支撑无疑就是对消息的处理 . 



