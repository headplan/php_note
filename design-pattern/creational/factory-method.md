# 工厂方法模式 - Factory Method

[https://zh.wikipedia.org/wiki/工厂方法](https://zh.wikipedia.org/wiki/工厂方法)

#### 描述

**工厂方法模式**是一种实现了“工厂”概念的面向对象设计模式 . 就像其他创建型模式一样 , 它也是处理在不指定对象具体类型的情况下创建对象的问题 . 工厂方法模式的实质是 , 定义一个创建对象的接口 , 但让实现这个接口的类来决定实例化哪个类 . 工厂方法让类的实例化推迟到子类中进行 .

> 对比简单工厂模式的优点是 , 可以将其子类用不同的方法来创建一个对象 . 举一个简单的例子 , 这个抽象类可能只是一个接口 . 这种模式是「真正」的设计模式 , 因为他实现了S.O.L.I.D原则中「D」的 「依赖倒置」.这意味着工厂方法模式取决于抽象类 , 而不是具体的类 . 这是与简单工厂模式和静态工厂模式相比的优势 .

创建一个对象常常需要复杂的过程 , 所以不适合包含在一个复合对象中 . 创建对象可能会导致大量的重复代码 , 可能会需要复合对象访问不到的信息 , 也可能提供不了足够级别的抽象 , 还可能并不是复合对象概念的一部分 . 工厂方法模式通过定义一个单独的创建对象的方法来解决这些问题 . 由子类实现这个方法来创建具体类型的对象 .

对象创建中的有些过程包括决定创建哪个对象、管理对象的生命周期 , 以及管理特定对象的创建和销毁的概念 .

> #### 工厂
>
> 在面向对象程序设计中 , 工厂通常是一个用来创建其他对象的对象 . **工厂是构造方法的抽象** , 用来实现不同的分配方案 . 工厂对象通常包含一个或多个方法 , 用来创建这个工厂所能创建的各种类型的对象 . 这些方法可能接收参数 , 用来指定对象创建的方式 , 最后返回创建的对象 .
>
> 有时 , 特定类型对象的控制过程比简单地创建一个对象更复杂 . 在这种情况下 , 工厂对象就派上用场了 . 工厂对象可能会动态地创建产品对象的类 , 或者从对象池中返回一个对象 , 或者对所创建的对象进行复杂的配置 , 或者应用其他的操作 .
>
> 这些类型的对象很有用 . 几个不同的设计模式都应用了工厂的概念 , 并可以使用在很多语言中 . 例如 , 在《设计模式》一书中 , 像**工厂方法模式**、**抽象工厂模式**、**生成器模式**，甚至是**单例模式**都应用了工厂的概念 .
>
> #### 变种
>
> 虽然工厂方法模式的背后动机是允许子类选择创建对象的具体类型 , 但是使用工厂方法模式也有一些其他的好处 , 其中很多并不依赖于子类 . 因此 , 有时候也会创建不使用多态性创建对象的工厂方法 , 以得到使用工厂方法的其他好处 .
>
> **工厂“方法”而非工厂“类” **
>
> 如果抛开设计模式的范畴 , “工厂方法”这个词也可以指作为“工厂”的方法 , 这个方法的主要目的就是创建对象 , 而这个方法不一定在单独的工厂类中 . 这些方法通常作为静态方法 , 定义在方法所实例化的类中 .
>
> 每个工厂方法都有特定的名称 . 在许多面向对象的编程语言中 , 构造方法必须和它所在的类具有相同的名称 , 这样的话 , 如果有多种创建对象的方式\(重载\)就可能导致歧义 . 工厂方法没有这种限制 , 所以可以具有描述性的名称 . 举例来说 , 根据两个实数创建一个复数 , 而这两个实数表示直角坐标或极坐标 , 如果使用工厂方法 , 方法的含义就非常清晰了 . 当工厂方法起到这种消除歧义的作用时 , 构造方法常常被设置为私有方法 , 从而强制客户端代码使用工厂方法创建对象 .

#### 使用

**适用性**

[https://zh.wikipedia.org/wiki/工厂方法\#适用性](https://zh.wikipedia.org/wiki/工厂方法#适用性)

**局限性**

[https://zh.wikipedia.org/wiki/工厂方法\#局限性](https://zh.wikipedia.org/wiki/工厂方法#局限性)

**工厂方法模式** , 定义一个创建对象的接口 , 让子类确定实例化哪一个类 . 工厂方法使一个类的实例化延迟到其子类 .

> 简单工厂模式的最大优点在于工厂类中包含了必要的逻辑判断 , 根据用户端的选择条件动态实例化相关的类 , 对于客户端来说 , 去除了与具体产品的依赖 .

> 工厂方法模式实现时 , 客户端需要决定实例化哪一个工厂来实现运算类 , 选择判断的问题还是存在的 , 也就是说 , 工厂方法把简单工厂的内部逻辑判断移到了客户端代码来进行 . 想要加功能 , 本来是改工厂类的 , 而现在是修改客户端 .

#### 结构

#### ![](/assets/factory-method.png)



